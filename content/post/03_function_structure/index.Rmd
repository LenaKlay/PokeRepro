---
title: "Create function and adapt structure"
author: "Erwan"
date: 2021-11-30
categories: ["R"]
tags: ["tmtcbythecc"]
---

Good practise coding: 

When you code do package::function when you call a function.
When you use a package you have to add it to the DESCRIPTION FILE. Do do so you can right in the consol `usethis:use_package(random_name_of_package)`.
Also, for each script do not forget to add a header (see example)

Now you are suppose to have a beautiful project structure link to gitHub. Now that we finished to create the basis of the project we will start it ! We will begin by create a new function. 

To do so we will create a new script. As we said we will use the R file to put inside R scripts that construct functions. The name of the script is really important, we will call it 01_clean_data_function.R. Each script that create function will finish by "function". We will create a function to clean the dataset.  

We open 01_clean_data_function.R and we write : 

```{r, eval=FALSE}
pokeclean <- function(poke){
  poke2 <- poke[-poke$generation %in% c("4", "5", "6", "7"), ]
  poke3 <- poke2[,-which(names(poke2) %in% c("japanese_name","classfication"))]
  return(poke3)
}
```

```{r, eval=FALSE, echo=FALSE}
poke <- read.csv("~/Desktop/PHD1/Formation/Reproductibility/PokeRepro/data/pokemon.csv")
a <- as.data.frame(table(poke$type1))
```


```{r, echo=FALSE, fig.cap="Taupiqueur attack - Coualbox", out.width = '40%'}
knitr::include_graphics("taupiqueur_meme_football.jpg")
```

When you create a function you also have to create a header Roxygene. Its will allow you to have an acces to the help menu doing ?myfunction. This will be useful for you if you have many functions or for anyone that may use your function. 

To do so you put your mouse cursor at the begegning of the function you just created. Then you go on *code*>*Insert Roxygene Squeleton*

#' Title  
#'  
#' @param poke   
#'  
#' @return  
#' @export  
#'  
#' @examples  
pokeclean <- function(poke){

Now you will modify it, we can do something like this: 

#' pokeclean is a function that take in input a dataframe and select only the 3 first generations of pokemons and remouve the japanese_name and classfication.  
#'  
#' @param poke  
#'  
#' @return a dataframe  
#' @export  
#'  
#' @examples there is no examples  

Now let's say that you have to create a function to plot something. Because this function isn't link with data manipulation we will create a new script R. We will call it **02_plot_function.R**

```{r, eval=FALSE}

```


We will create another function but this time it will concern. 
-on creer une function dans le dossier R “01_clean_data_function”
-dans analysis on creer “01_clean_data.R”. 

-on creer une function dans le dossier R “02_plot_function.R”
-dans analysis on creer “02_plot.R”

-dans analysis on creer “03_which_type.R” 
-dans ouputs on creer “03_which_type_barplot.png”  
-dans ouputs on creer “03_which_type_camemmbert.png”  
 
-dans analysis on creer “04_regression_weight_attack.R” 
-dans ouputs on creer “04_regression_weight_attack.png” 
-dans ouputs on creer “04_regression_weight_attack.RDATA”

